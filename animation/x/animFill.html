<html>
  <head>
<title>test fill mode & transitions</title>

<style>

@keyframes shiftColor {
    from { background-color : plum }
    to { background-color : pink }
}

@-webkit-keyframes shiftColor {
    from { background-color : plum }
    to { background-color : pink }
}

body {
    padding                 : 100px                ;
}

div {
    width                   : 10em                 ;
    height                  : 10em                 ;
    background-color              : #ddd                 ;
    -webkit-animation       : 2s 1 both linear ;
    animation               : 2s 1 both linear ;
    -webkit-animation-name  : bar;
}

div.alt {
    -webkit-animation-name  : bar;
}

</style>

<style id="custom"></style>

</head>
<body>

<!-- <span onmouseup="foo()" onmousedown="yow()">RESTART</span> 
<span onclick="foo()">RESTART</span>
-->
<span onclick="yowza()">RESTART</span>

<div></div>

<script>

window.onload = function() {


    var sources = document.styleSheets; // from link/style tags
    var rules = sources[0].cssRules; // list of all styles and at-rules
    var rule = rules[0]; // 
    if( rule.type == rule.KEYFRAMES_RULE || rule.type == rule.WEBKIT_KEYFRAMES_RULE ) {
        console.log(rule.name);  // shiftColor
        console.log(rule[0].cssText); // 0% { background-color: rgb(221, 160, 221); }
        if ( rule[0].keyText == '0%' ) rule[0].style.backgroundColor = '#aaa';
        console.log(rule[0].cssText); // 0% { background-color: rgb(170, 170, 170); }
    }

// css/cssom/CSSKeyframeRule
// console.log(sources[0].cssRules[0].type == sources[0].cssRules[0].type);

// console.log(sources);
// console.log(rule);

// corresponds to @region rule above:
// rule = document.styleSheets[0].cssRules[0];

// modify first nested style's selector:
// rule.cssRules[0].selectorText = 'article > p:first-of-type';

// modify first nested style's background-color property:
// rule.cssRules[0].style.backgroundColor = '#777';

// inspect first nested style as read-only string:
// console.log(rule.cssRules[0].cssText);

// inspect CSS syntax for entire @region rule:
// console.log(rule.cssText);


};

function foo() {
    var div = document.querySelector('div');
    div.style.WebkitAnimationName = 'bar';
}

function yow() {
    var div = document.querySelector('div');
    div.style.WebkitAnimationName = '';
}

function barfu() {
//    document.querySelector('#custom').textContent = "div { -webkit-animation-name: 'bar' }";
    var div = document.querySelector('div');
    div.classList.toggle('alt');
    console.log(div.className);
}

function yowza() {
    var div = document.querySelector('div');
    if (! div.style.WebkitAnimationName) {
        div.style.WebkitAnimationName = 'bar';
        console.log(div.style.WebkitAnimationName);    
        setTimeout(function() {
            document.querySelector('div').style.WebkitAnimationName = ''; 
            console.log(div.style.WebkitAnimationName);
        }, 500 );

    }
    
}

</script>

</body>
</html>

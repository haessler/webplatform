<html>
<head>
<title>basic</title>

<style>

article, div, aside {
    padding: 0.5em;
    margin: 0.5em;
    border-radius: 0.5em;
    -webkit-transition: all 1s;
}

div {
    background: plum;
    max-width: 20%;
    max-height: 12em;
    min-width: 2em;
    min-height: 2em;
    display: inline-block;
}

div:first-of-type {
    min-width: 80%;
}

@region div {
    font-weight: bold;
    -webkit-column-count: 2;
}

aside {
    background: #777;
    min-height: 24em;
    position: fixed;
    font-family: sans-serif;
    color: #fff;
    top: 1em;
    right: 1em;
    width: 12em;
}

section {
    margin-right: 15em;
}

p {
    widows: 2;
    orphans: 2;
}

p:first-of-type {
    margin-top: 0;
}

</style>

<style id="tmp">
article { -webkit-flow-into: main }
div { -webkit-flow-from: main }
</style>

</head>
<body>

<article>

<p>
riverrun, past Eve and Adam's, from swerve of shore to bend of bay,
brings us by a commodius vicus of recirculation back to Howth Castle
and Environs.

<p>
Sir Tristram, violer d'amores, fr'over the short sea, had passencore
rearrived from North Armorica on this side the scraggy isthmus of
Europe Minor to wielderfight his penisolate war: nor had topsawyer's
rocks by the stream Oconee exaggerated themselse to Laurens County's
gorgios while they went doublin their mumper all the time: nor avoice
from afire bellowsed mishe mishe to tauftauf thuartpeatrick: not yet,
though venissoon after, had a kidscad buttended a bland old isaac: not
yet, though all's fair in vanessy, were sosie sesthers wroth with
twone nathandjoe.  Rot a peck of pa's malt had Jhem or Shen brewed by
arclight and rory end to the regginbrow was to be seen ringsome on the
aquaface.

<p>
The fall
(bababadalgharaghtakamminarronnkonnbronntonnerronntuonnthunntrovarrhounawnskawntoohoohoordenenthurnuk!)
of a once wallstrait oldparr is retaled early in bed and later on life
down through all christian minstrelsy.  The great fall of the offwall
entailed at such short notice the pftjschute of Finnegan, erse solid
man, that the humptyhillhead of humself prumptly sends an unquiring
one well to the west in quest of his tumptytumtoes: and their
upturnpikepointandplace is at the knock out in the park where oranges
have been laid to rust upon the green since devlinsfirst loved livvy.

<p>
What clashes here of wills gen wonts, oystrygods gaggin fishygods!
Br&eacute;kkek K&eacute;kkek K&eacute;kkek K&eacute;kkek!  K&oacute;ax
K&oacute;ax K&oacute;ax!  Ualu Ualu Ualu!  Quaouauh!  Where the
Baddelaries partisans are still out to mathmaster Malachus Micgranes
and the Verdons catapelting the camibalistics out of the Whoyteboyce
of Hoodie Head.  Assiegates and boomeringstroms.  Sod's brood, be me
fear!  Sanglorians, save!  Arms apeal with larms, appalling.
Killykillkilly: a toll, a toll.  What chance cuddleys, what cashels
aired and ventilated!  What bidimetoloves sinduced by what
tegotetabsolvers!  What true feeling for their's hayair with what
strawng voice of false jiccup!  O here here how hoth sprowled met the
duskt the father of fornicationists but, (O my shining stars and
body!)  how hath fanespanned most high heaven the skysign of soft
advertisement!  But was iz?  Iseut?  Ere were sewers?  The oaks of ald
now they lie in peat yet elms leap where askes lay.  Phall if you but
will, rise you must: and none so soon either shall the pharce for the
nunce come to a setdown secular phoenish.

</article>

<section>
<div>1</div>
<div>2</div>
<div>3</div>
<div>4</div>
<div>5</div>
<div>6</div>
<div>7</div>
<div>8</div>
<div>9</div>
<div>10</div>
<div>11</div>
<div>12</div>
<div>13</div>
<div>14</div>
<div>15</div>
<div>16</div>
<div>17</div>
<div>18</div>
<div>19</div>
<div>20</div>
</section>

<aside>

<label>flow-into (source content)</label>
<br/><select data-sel="article">
  <option>none
  <option selected>main
</select>

<br/><label>flow-from (layout elements)</label>
<br/><select data-sel="div">
  <option>none
  <option selected>main
</select>

<hr/>
<span id="d" onclick="app.dbg()">what does regionOverset return?</span>
<hr/>
<span id="d2" onclick="app.dbgRange()">what does getRegionFlowRanges() return?</span>



</aside>

<script>
var app = new Function();

window.onload = function() {
    app.p = new Function();
    app.s = document.querySelector('#tmp');
    app.inputs = document.querySelectorAll('input, select');
    for (var i = 0; i < app.inputs.length ; i++) {
        app.p[app.inputs[i].dataset.sel] = app.inputs[i].value;
        app.inputs[i].addEventListener('change', app.mod);
    }

                        // debug:
    app.flow = document.webkitGetNamedFlows()['main'];
    app.regions = app.flow.getRegions();
    app.region = app.regions[app.regions.length-1];
};

app.mod = function(e) {
    app.p[e.target.dataset.sel] = e.target.value;
    console.log(app.p[e.target.dataset.sel]);

    app.s.innerHTML = "article { -webkit-flow-into: " + app.p['article'] + " }\n\n";
    app.s.innerHTML += "div { -webkit-flow-from: " + app.p['div'] + " }";
}

app.dbg = function() {
    try {
        app.over = app.region.webkitRegionOverset;
        document.querySelector('#d').textContent = app.over;
    }
    catch(e) {
        document.querySelector('#d').textContent = e;
    }
}

app.dbgRange = function() {
    try {
        app.ranges = app.region.webkitGetRegionFlowRanges();
        document.querySelector('#d2').textContent = (app.ranges == null | app.ranges === false);
    }
    catch(e) {
        document.querySelector('#d2').textContent = e;
    }
}

</script>

</body>
</html>

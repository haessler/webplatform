<html>
<head>
<title>SVG Filter Demo</title>

<style>
/* CSS */

filter, feSpecularLighting {
    -webkit-transition: all 1s;
}

body {
    background       : #aaaaaa;
    font-family      : Trebuchet MS;
}

svg, aside, pre {
    padding          : 1em;
    margin           : 1em;
    border-radius    : 1em;
    border           : thin #777 solid;
    background-color : #fff;
}

fieldset {
    border-radius    : 1em;
    border           : medium #aaa solid;
    margin-top       : 1em;
}

svg {
    width            : 600;
    height           : 600;
}

aside {
    position         : fixed;
    width            : 400px;
    top              : 1em;
    right            : 1em;
    max-height       : 500;
    overflow-y       : scroll;
}

pre {
    position         : fixed;
    width            : 600px;
    bottom           : 1em;
    height           : 100px;
    right            : 1em;
    overflow         : scroll;
}

select ~ fieldset {
    display: none;
}

select[data-mode=Blend]             ~ #fsBlend,
select[data-mode=ColorMatrix]       ~ #fsColorMatrix,
select[data-mode=ComponentTransfer] ~ #fsComponentTransfer,
select[data-mode=Composite]         ~ #fsComposite,
select[data-mode=ConvolveMatrix]    ~ #fsConvolveMatrix,
select[data-mode=DiffuseLighting]   ~ #fsDiffuseLighting,
select[data-mode=DisplacementMap]   ~ #fsDisplacementMap,
select[data-mode=Flood]             ~ #fsFlood,
select[data-mode=GaussianBlur]      ~ #fsGaussianBlur,
select[data-mode=Image]             ~ #fsImage,
select[data-mode=Merge]             ~ #fsMerge,
select[data-mode=Morphology]        ~ #fsMorphology,
select[data-mode=Offset]            ~ #fsOffset,
select[data-mode=SpecularLighting]  ~ #fsSpecularLighting,
select[data-mode=Tile]              ~ #fsTile,
select[data-mode=Turbulence]        ~ #fsTurbulence
{
    display: block;
}




</style>

</head>
<body>

<svg width="500" height="700">

<defs>

<filter id="GaussianBlur">
<feGaussianBlur id="fe_gaussian" stdDeviation="0"></feGaussianBlur>
</filter>

<filter id="Offset">
<feOffset id="fe_offset" dx="0" dy="0"></feOffset>
</filter>

<filter id="Morphology">
<feMorphology id="fe_morphology" radius="1" operator="dilate"></feMorphology>
</filter>

<filter id="Turbulence">
<feTurbulence id="fe_turbulence" baseFrequency="0.01" numOctaves="1" seed="1" stitchTiles="noStitch" type="fractalNoise"></feTurbulence>
</filter>

<filter id="Blend">
   <feImage xlink:href="img/Objects001.jpg" result="i1" id="fe_blendI1" />
   <feImage xlink:href="img/Objects005.jpg" result="i2" id="fe_blendI2" />
   <feBlend id="fe_blend" in="i1" in2="i2" mode="screen"/>
</filter>

<filter id="SpecularLighting">
  <feSpecularLighting id="fe_specularLighting" specularExponent="25" lighting-color="black">
    <fePointLight x="400" y="100" z="100" id="fe_pointLight" />
  </feSpecularLighting>
</filter>



</defs>

<!--
<image id="img2" xlink:href="img/Objects002.jpg" x="320" y="0" width="320" height="569"></image>
-->
<image id="img1" xlink:href="img/Objects001.jpg" x="0" y="0" width="320" height="569"></image>
</svg>

<aside>

<label>Filter Effect</label>
<select data-tgt="#img1" data-attr="filter" data-prefix="url(#" data-suffix=")"  onchange="this.dataset.mode = this.value">
  <optgroup label="done">
    <option>Blend</option>
    <option>GaussianBlur</option>
    <option>Morphology</option>
    <option>Offset</option>
    <option>SpecularLighting</option>
    <option>Turbulence</option>
  </optgroup>
  <optgroup label="to do">
    <option>ColorMatrix</option>
    <option>ComponentTransfer</option>
    <option>Composite</option>
    <option>ConvolveMatrix</option>
    <option>DiffuseLighting</option>
    <option>DisplacementMap</option>
    <option>Flood</option>
    <option>Image</option>
    <option>Merge</option>
    <option>Tile</option>
  </optgroup>
</select>

<br/><label>Image</label>
<select data-tgt="#img1" data-attr="xlink:href" data-prefix="img/Objects" data-suffix=".jpg">
    <option>001</option>
    <option>002</option>
    <option>003</option>
    <option>004</option>
    <option>005</option>
    <option>006</option>
    <option>007</option>
    <option>008</option>
    <option>009</option>
    <option>010</option>
    <option>011</option>
    <option>012</option>
</select>

<!--
<br/><label>Image #2</label>
<select data-tgt="#img2" data-attr="xlink:href" data-prefix="img/Objects" data-suffix=".jpg">
    <option>001</option>
    <option>002</option>
    <option>003</option>
    <option>004</option>
    <option>005</option>
    <option>006</option>
    <option>007</option>
    <option>008</option>
    <option>009</option>
    <option>010</option>
    <option>011</option>
    <option>012</option>
</select>
-->

<fieldset id="fsGaussianBlur" ><legend>feGaussianBlur</legend>

<label>stdDeviation</label>
<input data-tgt="#fe_gaussian" data-attr="stdDeviation" type="range" min="0" max="60" value="0" />

<br/><label>(n,0)</label>
<input data-tgt="#fe_gaussian" data-attr="stdDeviation" type="range" min="0" max="60" value="0"  data-suffix=",0"/>

<br/><label>(0,n)</label>
<input data-tgt="#fe_gaussian" data-attr="stdDeviation" type="range" min="0" max="60" value="0" data-prefix="0," />

</fieldset>

<fieldset id="fsMorphology" ><legend>feMorphology</legend>

<label>operator</label>
<select data-tgt="#fe_morphology" data-attr="operator" >
    <option>dilate</option>
    <option>erode</option>
</select>

<br/><label>radius</label>
<input data-tgt="#fe_morphology" data-attr="radius" type="range" min="1" max="50" value="1" />

<br/><label>(n,0)</label>
<input data-tgt="#fe_morphology" data-attr="radius" type="range" min="1" max="50" value="1"  data-suffix=",1"/>

<br/><label>(0,n)</label>
<input data-tgt="#fe_morphology" data-attr="radius" type="range" min="1" max="50" value="1" data-prefix="1," />

</fieldset>

<fieldset id="fsOffset" ><legend>feOffset</legend>

<label>dx</label>
<input data-tgt="#fe_offset" data-attr="dx" type="range" min="-100" max="100" value="0" />

<br/><label>dy</label>
<input data-tgt="#fe_offset" data-attr="dy" type="range" min="-100" max="100" value="0" />

</fieldset>

<fieldset id="fsTurbulence" ><legend>feTurbulence</legend>

<label>baseFrequency</label>
<input data-tgt="#fe_turbulence" data-attr="baseFrequency" type="range" min="0" max="0.5" step="0.01" value="0" />

<br/><label>(n,.1)</label>
<input data-tgt="#fe_turbulence" data-attr="baseFrequency" type="range" min="0" max="0.5" step="0.01" value="0" data-suffix=",0.1"/>

<br/><label>(.1,n)</label>
<input data-tgt="#fe_turbulence" data-attr="baseFrequency" type="range" min="0" max="0.5" step="0.01" value="0" data-prefix="0.1,"/>

<br/><label>numOctaves</label>
<input data-tgt="#fe_turbulence" data-attr="numOctaves" type="range" min="0" max="10" value="0"/>

<br/><label>seed</label>
<input data-tgt="#fe_turbulence" data-attr="seed" type="range" min="0" max="100" step="0.1" value="0"/>

<br/><label>type</label>
<select data-tgt="#fe_turbulence" data-attr="type" >
    <option>turbulence</option>
    <option>fractalNoise</option>
</select>

<br/><label>stitchTiles</label>
<select data-tgt="#fe_turbulence" data-attr="stitchTiles" >
    <option>stitch</option>
    <option>noStitch</option>
</select>

</fieldset>

<fieldset id="fsBlend"><legend>feBlend</legend>

<label>mode</label>
<select data-tgt="#fe_blend" data-attr="mode" >
    <option>normal</option>
    <option>multiply</option>
    <option>screen</option>
    <option>darken</option>
    <option>lighten</option>
</select>

<br/><label>image 1</label>
<select data-tgt="#fe_blendI1" data-attr="xlink:href" data-prefix="img/Objects" data-suffix=".jpg">
    <option>001</option>
    <option>002</option>
    <option>003</option>
    <option>004</option>
    <option>005</option>
    <option>006</option>
    <option>007</option>
    <option>008</option>
    <option>009</option>
    <option>010</option>
    <option>011</option>
    <option>012</option>
</select>

<br/><label>image 2</label>
<select data-tgt="#fe_blendI2" data-attr="xlink:href" data-prefix="img/Objects" data-suffix=".jpg">
    <option>001</option>
    <option>002</option>
    <option>003</option>
    <option>004</option>
    <option>005</option>
    <option>006</option>
    <option>007</option>
    <option>008</option>
    <option>009</option>
    <option>010</option>
    <option>011</option>
    <option>012</option>
</select>


</fieldset>
<fieldset id="fsColorMatrix" ><legend>feColorMatrix</legend>


matrix | saturate | hueRotate | luminanceToAlpha

</fieldset>
<fieldset id="fsComponentTransfer" ><legend>feComponentTransfer</legend>
</fieldset>
<fieldset id="fsComposite" ><legend>feComposite</legend>
</fieldset>
<fieldset id="fsConvolveMatrix" ><legend>feConvolveMatrix</legend>
</fieldset>
<fieldset id="fsDiffuseLighting" ><legend>feDiffuseLighting</legend>
</fieldset>
<fieldset id="fsDisplacementMap" ><legend>feDisplacementMap</legend>
</fieldset>
<fieldset id="fsFlood" ><legend>feFlood</legend>
</fieldset>
<fieldset id="fsImage" ><legend>feImage</legend>
</fieldset>
<fieldset id="fsMerge" ><legend>feMerge</legend>
</fieldset>
<fieldset id="fsSpecularLighting" ><legend>feSpecularLighting</legend>

<label>lighting-color</label>
<input data-tgt="#fe_specularLighting" data-attr="lighting-color" type="color"/>

<br/><label>specularExponent</label>
<input data-tgt="#fe_specularLighting" data-attr="specularExponent" type="range" min="0" max="20" value="0"/>

<br/><label>x</label>
<input data-tgt="#fe_pointLight" data-attr="x" type="range" min="-1000" max="1000" value="0"/>
<br/><label>y</label>
<input data-tgt="#fe_pointLight" data-attr="y" type="range" min="-1000" max="1000" value="0"/>
<br/><label>z</label>
<input data-tgt="#fe_pointLight" data-attr="z" type="range" min="-1000" max="1000" value="0"/>


</fieldset>
<fieldset id="fsTile" ><legend>feTile</legend>
</fieldset>



</aside>

<pre></pre>

<script>

var app = new Function();

window.onload = function() {
    var input;
    app.inputs = document.querySelectorAll('select, input');
    app.dbg = document.querySelector('pre');

    for (var i=0, l=app.inputs.length; i<l; i++) {
        input = app.inputs[i];
        if (!input.dataset.prefix) input.dataset.prefix = "";
        if (!input.dataset.suffix) input.dataset.suffix = "";
        input.addEventListener('change', app.modify);
    }
}

app.modify = function(e) {
    var input = e.target;
    console.log(input);
    var element = document.querySelector(input.dataset.tgt);
    var value = input.dataset.prefix + input.value + input.dataset.suffix;
    element.setAttribute(input.dataset.attr, value);
    app.dbg.textContent = "TAG:    " + element.tagName + "\n";
    app.dbg.textContent += "TARGET: " + input.dataset.tgt + "\n";
    app.dbg.textContent += "ATTR:   " + input.dataset.attr + "\n";
    app.dbg.textContent += "VALUE:  " + value + "\n";
}

</script>

</body>
</html>

~== NamedFlow_regionlayoutupdate ==

~== 6.4. Region flow layout events ==

~NamedFlow objects are EventTargets which dispatch regionlayoutupdate
~events when there is a possible layout change in their region
~chain. The event is asynchronous, and fires in the same step of the
~event loop [HTML5] as when MutationObservers [DOM] are invoked.

~If region chain nesting occurs (the contents of a NamedFlow contains
~regions for a different NamedFlow) then the regionlayoutupdate event
~for the nested flow(s) must be dispatched before the
~regionlayoutupdate event for the containing flow is dispatched.

~Type regionlayoutupdate

~Interface UIEvent (see [DOM-LEVEL-3-EVENTS])

~Sync / Async Async

~Bubbles No

~Target NamedFlow

~Cancelable Yes

~Default action none

~Context info

~Event.target: NamedFlow whose layout may have changed


window.

document.getNamedFlows()['main'].addEventListener('regionlayoutupdate', modifyFlow);

// dispatches functions to add/delete regions based on changes to how
// content flows through a region chain:

function modifyFlow(e) {
    var flow = e.target;
    if (flow.overset) {
        appendRegion(flow.name);
    }
    else if (flow.firstEmptyRegionIndex !== -1) {
        deleteEmptyRegions(flow.name);
    }
}

    app.regions = app.flow.getRegions();
    app.section = document.querySelector('section');
    app.debug = document.querySelector('#debug');
